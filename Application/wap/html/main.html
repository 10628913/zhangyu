<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <link rel="stylesheet" type="text/css" href="../css/aui.2.0.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui-slide.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui-flex.css" />
  	<link rel="stylesheet" type="text/css" href="../css/swiper.min.css" />
  	<link rel="stylesheet" type="text/css" href="../css/layer.css" />
    <!-- <link rel="stylesheet" type="text/css" href="../css/aui-pull-refresh.css" /> -->
    <link rel="stylesheet" type="text/css" href="../css/aui-pull-refresh-2.css" />
	<style>
		.aui-bar{
	        position: fixed;
	        top: 0;
	        left: 0;
	        width: 100%;
	        background-color: #df3031;
	        color: #fff;
	    }
	    .aui-bar +*{
	        padding-top: 2.3rem;
	    }
	    html,body{
	        background-color: #fff;
	        transition: 300ms;
			-webkit-transition: 300ms;
	    }
        .aui-tab-item.active {
            color: #df3031;
            border-bottom: 2px solid #df3031;
            z-index: 100;
        }
        .aui-tab-item {
            min-width: 3rem;
            width: auto;
        }
        .menu {
            width: 100%;
            background: #ffffff;
        }
        .swiper-container {
            width: 85%;
            float: left;
            background:#ffffff;
        }
		.aui-slide-page-active {
		    background: #df3031;
		}
		.slide-title {
			background-color: rgba(0,0,0,0.7);
			height: 2.2rem;
			line-height: 2.2rem;
			padding: 0 0.4rem;
			color: #ffffff;
			font-size: 0.8rem;
			position: absolute;
			left: 0;
			top: 7rem;
			z-index: 999999;
			display: inline-block;
		}
		.slide-desc {
			background-color: rgba(0,0,0,0.7);
			color: #ffffff;
			font-size: 0.6rem;
			position: absolute;
			left: 0;
			top: 7.2rem;
			display: inline-block;
			padding: 0.2rem 0.4rem;
		}
		.aui-content {
			background-color: #ffffff;
		}
		#news-list {
			position: relative;
			display: box;
    		display: -webkit-box;
    		display: inline-block;
		    display: -webkit-flex;

		    display: flex;
		    -webkit-flex-wrap: wrap;
            		flex-wrap: wrap;
            overflow-x: hidden;
		}
		#news-list:after {
			width: 1px;
		    height: 100%;
		    background-color: #eeeeee;
		    display: block;
		    content: '';
		    position: absolute;
		    z-index: 2;
		    top: auto;
		    right: auto;
		    bottom: 0;
		    left: 50%;
		    -webkit-transform-origin: 100% 50%;
		            transform-origin: 100% 50%;
		    maller-events: none;
		}
		#news-list .news-item {
			width: 50%;
			float: left;
			position: relative;
			padding: 0.5rem;
			padding-bottom: 2rem;
			min-height: 13rem;
		}
		#news-list .news-item:after {
		    width: 100%;
		    height: 1px;
		    background-color: #eeeeee;
		    display: block;
		    content: '';
		    position: absolute;
		    top: auto;
		    right: auto;
		    bottom: 0;
		    left: 0;
		    -webkit-transform-origin: 50% 100%;
		            transform-origin: 50% 100%;
		    pointer-events: none;
		}
		#news-list .news-img img {
			width: 100%;
			height: auto;
			display: block;
		}
		#news-list .news-img {
			margin-bottom: 0.5rem;
		}
		#news-list .news-title {
			font-size: 0.8rem;
			color: #373737;
		}
		#news-list .news-desc {
			margin-top: 0.5rem;
			width: 100%;
			font-size: 0.7rem;
			color: #666666;
		}
		#news-list .news-info {
			position: absolute;
			bottom: 0.5rem;
			width: auto;
			padding-right: 1rem;
			margin-top: 0.5rem;
			width: 100%;
			font-size: 0.6rem;
			color: #999999;
		}
        #news-list .news-tag {
			/*margin-top: 0.15rem;*/
			padding: 0.05rem  0.15rem;
			display: inline-block;
			font-size: 0.5rem;
			box-sizing: border-box;
            display: box;
		    display: -webkit-box;
		    display: -webkit-flex;
		    display: flex;
		    -webkit-align-items: center;
		            align-items: center;
		}
		#news-list .news-tag span {
			margin-top: -0.05rem;
			margin-bottom: -0.05rem;
			margin-left: -0.2rem;
			display: block;
			float: left;
			padding: 0.05rem 0.25rem;
		}
		#news-list .news-tag span .aui-iconfont {
			font-size: 0.5rem;
		}
		#news-list .news-tag.aui-tag-info {
			color: #5b9cf5;
		}
		#news-list .news-tag.aui-tag-info span {
			background: #ffffff;
		}
		.aui-border.aui-tag-info:after {
		    border:1px solid #5b9cf5;
		     border-radius: 0.2rem;
		}
		#news-list .news-tag.aui-tag-danger {
			color: #e74c3c;
		}
		.aui-border.aui-tag-danger:after {
		    border:1px solid #e74c3c;
		    border-radius: 0.2rem;
		}
		#news-list .news-tag.aui-tag-danger span {
			background: #ffffff;
		}

		#news-list .news-tag.aui-tag-warning {
			color: #ff9800;
		}
		.aui-border.aui-tag-warning:after {
		    border:1px solid #ff9800;
		}
		#news-list .news-tag.aui-tag-warning span {
			background: #ff9800;
		}
		#news-list .news-tag.aui-tag-success {
			color: #2ecc71;
		}
		.aui-border.aui-tag-success:after {
		    border:1px solid #2ecc71;
		}
		#news-list .news-tag.aui-tag-success span {
			background: #2ecc71;
		}

        #nodata img {
			width: 5rem;
		}
		.aui-ellipsis {
			display: -webkit-box;
			overflow: hidden;
			text-overflow: ellipsis;
			word-wrap: break-word;
			white-space: normal !important;
			-webkit-line-clamp: 5;
			-webkit-box-orient: vertical;
		}
        .hide{
            display: none;
        }
        .loading-data,
        .no-data {
        	width: 100%;
        	margin-top: 30px;
        	padding: 0.75rem;
        	text-align: center;
        }
        .loading-data img,
        .no-data img {
        	width: 60%;
        	margin: 0 auto;
        }
        .loading-data:after,
        .no-data:after{
            width: 0 !important;
        }

		/*侧滑栏*/
		.slide-menu {
			background: transparent;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			z-index: 9999;
			-webkit-transform: translate3d(-100%,0,0);
			transform: translate3d(-100%,0,0);
			transition: 300ms;
			-webkit-transition: 300ms;

		}
		.menu-content{
			background-color: #d43d3d;
			position: relative;
			top:0;
			right: 30%;
			z-index: 9999;
			overflow-x: hidden;
		}
		.slide-menu.show{
			-webkit-transform: translate3d(0,0,0);
			transform: translate3d(0,0,0);
			transition: 300ms;
			-webkit-transition: 300ms;

		}
		.slide-menu .aui-content {
			width: 66.66%;
			background-color: transparent;
			-webkit-transform: translate3d(50%,0,0);
			transform: translate3d(50%,0,0);
		}
		.slide-menu .aui-list {
			background: #d43d3d;
			color: #ffffff;
		}
		.slide-menu .aui-list .aui-list-item-inner {
			color: #ffffff;
		}
		.slide-menu .aui-list .aui-list-item:active {
			background: none;
		}
		.slide-menu .aui-list .aui-list-item .aui-iconfont {
			color: #ffffff !important;
			font-size: 0.7rem !important;
		}
		.slide-menu .aui-list:before,
		.slide-menu .aui-list:after,
		.slide-menu .aui-list .aui-list-item:after {
			background-color: #eb8182;
		}
		.slide-menu img.avatar {
			border-radius: 50%;
			max-width: 40%;
			margin: 0 auto;
			display: block;
			border: 2px solid #ffffff;
		}
		.slide-menu .aui-list-item.hidden{
			overflow: hidden;
			display: none;
		}
		.slide-menu .item{
			position: relative;
			left: 1rem;
		}
		.slide-menu .aui-list.item:before{
			height: 0;
		}
		.closeslide{
			position: absolute;
			right: 0.75rem;
			top: 0rem;
			padding: 0.5rem;
			z-index: 10000;
		}
		.closeslide .aui-iconfont{
			font-size: 1.5rem;
			color: #fff;
		}
	</style>
</head>
<body>
    <header class="aui-bar aui-bar-nav" id="header">
        <a class="aui-pull-left" tapmode onclick="slideMenu()">
        <!-- <a class="aui-pull-left" tapmode onclick="openSlide()"> -->
            <span class="aui-iconfont aui-icon-list"></span>
        </a>
        <div class="aui-title">新闻</div>
        <a class="aui-pull-right">
            <span class="aui-iconfont aui-icon-search" tapmode onclick="openNewsSearch()"></span>
            <span class="aui-iconfont aui-icon-plus" tapmode onclick="openNewsColumn()" style="margin-left:0.2rem"></span>

        </a>
    </header>
    <section  style="margin:0;">
        <section id="pullRefresh">
     <!-- 轮播图 -->
     <script id="news-classify-tpl" type="text/x-dot-template">
         {{ for(var i in it) { }}
         <div class="swiper-slide classify-item menu-custom-item" tapmode onclick="openNewsClassify('{{=it[i].classify_id}}','{{=it[i].classify_name}}')">{{=it[i].classify_name}}</div>
         {{ } }}
     </script>
 	<div class="aui-content news-classify" style="margin:0;">
         <div class="swiper-container">
             <div class="swiper-wrapper" id="news-classify-list"></div>
         </div>
     </div>
     <div id="aui-slide" class="slide hide">
 		<div class="aui-slide-wrap" ></div>
 		<div class="aui-slide-page-wrap"><!--分页容器--></div>
 	</div>
 	<script id="news-list-tpl" type="text/x-dot-template">
         {{ for(var i in it) { }}
         <div class="news-item" tapmode onclick="openNewsDetail('{{=it[i].news_id}}','{{=it[i].type_id}}')">
         	{{? it[i].type_id == '2'}}
         		{{? it[i].thumb && it[i].thumb.length == 1}}
         			<div class="news-img">
 						<img src="../image/image_loading_1.png" data-echo="{{=it[i].news_thumb[0]}}" />
 					</div>
         		{{?? it[i].thumb && it[i].thumb.length == 2}}
 	        		<div class="aui-flex-col news-img">
 						<div class="aui-flex-item-6" style="padding-right:0.15rem;">
 							<img src="../image/image_loading_1.png" data-echo="{{=it[i].thumb[0]}}"  />
 						</div>
 						<div class="aui-flex-item-6">
 							<img src="../image/image_loading_1.png" data-echo="{{=it[i].thumb[1]}}" />
 						</div>
 					</div>
         		{{?? it[i].thumb && it[i].thumb.length == 3}}
 	        		<div class="aui-flex-col news-img">
 						<div class="aui-flex-item-4" style="padding-right:0.15rem;">
 							<img src="../image/image_loading_1.png" data-echo="{{=it[i].thumb[0]}}" />
 						</div>
 						<div class="aui-flex-item-4" style="padding-right:0.15rem;">
 							<img src="../image/image_loading_1.png" data-echo="{{=it[i].thumb[1]}}" />
 						</div>
 						<div class="aui-flex-item-4">
 							<img src="../image/image_loading_1.png" data-echo="{{=it[i].thumb[2]}}" />
 						</div>
 					</div>
 				{{?}}
 			{{??}}
 				{{? it[i].news_thumb}}
 				<div class="news-img">
 					<img src="../image/image_loading_1.png" data-echo="{{=it[i].news_thumb}}" />
 				</div>
 				{{?}}
         	{{?}}

 			<div class="news-title">{{=it[i].news_title}}</div>
 			{{? !it[i].news_thumb}}
 			<div class="news-desc aui-ellipsis">
 				{{=it[i].news_description}}
 			</div>
 			{{?}}
 			<div class="news-info">
 				{{=it[i].news_source}} <time>{{=it[i].news_pub_time}}</time>
 				{{? it[i].type_id == 1}}
                 <div class="news-tag aui-border aui-tag-danger aui-pull-right">
 					<span><i class="aui-iconfont aui-icon-edit"></i></span> 文章
 				</div>
                 {{?? it[i].type_id == 2}}
                 <div class="news-tag aui-border aui-tag-danger aui-pull-right">
 					<span><i class="aui-iconfont aui-icon-edit"></i></span> 图集
 				</div>
                 {{?? it[i].type_id == 3}}
                 <div class="news-tag aui-border aui-tag-danger aui-pull-right">
 					<span><i class="aui-iconfont aui-icon-video"></i></span> 视频
 				</div>
                 {{?? it[i].type_id == 4}}
                 <div class="news-tag aui-border aui-tag-danger aui-pull-right">推广</div>
                 {{?? }}
                 <div class="news-tag aui-border aui-tag-danger aui-pull-right">
 					<span><i class="aui-iconfont aui-icon-edit"></i></span> 文章
 				</div>
                 {{? }}
 			</div>
 		</div>
         {{ } }}
     </script>
 	<section class="aui-content no-data" id="news-list" style="margin-bottom:0;">
 		<div class="loading-data">
 			<img src="../image/loading.png" />
 		</div>
 	</section>
</section>
</section>
 </body>
 <script id="slider-tpl" type="text/x-dot-template">
     {{ for(var i in it) { }}
         <div class="aui-slide-node" tapmode onclick="openNewsDetail({{=it[i].news_id}},{{=it[i].type_id}})">
             <div class="slide-title">{{=it[i].news_title}}</div>
             <img src="../image/blank.gif" data-echo="{{=it[i].news_thumb}}"/>
         </div>
      {{ } }}
 </script>
	<div class="slide-menu">
		<div class="aui-mask"></div>
		<div class="menu-content">
			<div class="closeslide" tapmode onclick="closeSlide()">
				<span class="aui-iconfont aui-icon-close-circle"></span>
			</div>
			<div class="aui-content" style="padding-top:2.5rem; margin-bottom:1.5rem;">
				<img class="avatar" src="../image/noavatar.gif" id="avatar">
			</div>
			<div class="aui-content">
		        <ul class="aui-list aui-list-in">
					<li class="aui-list-item" tapmode onclick="changeNewMenu()">
			            <div class="aui-list-item-media aui-list-item-middle">
			                <i class="aui-iconfont aui-icon-right aui-text-info" id="downicon"></i>
			            </div>
			            <div class="aui-list-item-inner" >
			                新闻
			            </div>
		            </li>
                    <li class="aui-list-item hidden" id="news-menu">
        	            <ul class="aui-list aui-list-in item active" style="width:100%;" id="news-menu-list" >
                            <li class="aui-list-item" tapmode onclick="openNewsList('1','热点')">
                                <div class="aui-list-item-media aui-list-item-middle">
                                    <i class="aui-iconfont aui-icon-right aui-text-info"></i>
                                </div>
                                <div class="aui-list-item-inner">
                                    热点
                                </div>
                            </li>
                            <li class="aui-list-item" tapmode onclick="openNewsList('2','本地')">
                                <div class="aui-list-item-media aui-list-item-middle">
                                    <i class="aui-iconfont aui-icon-right aui-text-info"></i>
                                </div>
                                <div class="aui-list-item-inner">
                                    本地
                                </div>
                            </li>
                        </ul>
                    </li>
		            <li class="aui-list-item" tapmode onclick="openHouse()">
			            <div class="aui-list-item-media aui-list-item-middle">
			                <i class="aui-iconfont aui-icon-right aui-text-info"></i>
			            </div>
			            <div class="aui-list-item-inner">
			                房源
			            </div>
		            </li>
		            <li class="aui-list-item" tapmode onclick="openActivity()">
			            <div class="aui-list-item-media aui-list-item-middle">
			                <i class="aui-iconfont aui-icon-right aui-text-info"></i>
			            </div>
			            <div class="aui-list-item-inner">
			                活动
			            </div>
		            </li>
		            <!-- <li class="aui-list-item" tapmode onclick="openCommunity()">
			            <div class="aui-list-item-media aui-list-item-middle">
			                <i class="aui-iconfont aui-icon-right aui-text-info"></i>
			            </div>
			            <div class="aui-list-item-inner">
			                社区
			            </div>
		            </li>
		            <li class="aui-list-item" tapmode onclick="openMall()">
			            <div class="aui-list-item-media aui-list-item-middle">
			                <i class="aui-iconfont aui-icon-right aui-text-info"></i>
			            </div>
			            <div class="aui-list-item-inner">
			                积分
			            </div>
		            </li> -->
		            <li class="aui-list-item" tapmode onclick="openMy()">
			            <div class="aui-list-item-media aui-list-item-middle">
			                <i class="aui-iconfont aui-icon-right aui-text-info"></i>
			            </div>
			            <div class="aui-list-item-inner">
			                我的
			            </div>
		            </li>
		        </ul>
		    </div>
		</div>

	</div>
</body>
<script id="news-menu-tpl" type="text/x-dot-template">
        {{ for(var i in it) { }}
        <li class="aui-list-item my-column" tapmode onclick="openNewsList('{{=it[i].classify_id}}','{{=it[i].classify_name}}')">
            <div class="aui-list-item-media aui-list-item-middle">
                <i class="aui-iconfont aui-icon-right aui-text-info"></i>
            </div>
            <div class="aui-list-item-inner">
                {{=it[i].classify_name}}
            </div>
        </li>
        {{ } }}
    </script>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/swiper.min.js"></script>
<script type="text/javascript" src="../script/aui-slide.js"></script>
<script type="text/javascript" src="../script/aui-pull-refresh-2.js"></script>
<script type="text/javascript" src="../script/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="../script/layer.js"></script>
<script type="text/javascript" src="../script/doT.min.js"></script>
<script type="text/javascript" src="../script/echo.min.js"></script>
<!-- <script type="text/javascript" src="../script/aui-pull-refresh.js"></script> -->
<script type="text/javascript" src="../script/aui-scroll.js"></script>

<script type="text/javascript">
    var classify_id = 1,classify_name="热点";
    var a={};
     a.style = 'background-color:RGBA(0,0,0,0.6); color:#fff; border:none;';
     a.time = 2;
     var pageNum = 0,siteUrl;

     if($api.getStorage("avatar")){
         document.getElementById("avatar").setAttribute("src",$api.getStorage("avatar"));
     }

     var scrollStatus = true;
     var scroll = new auiScroll({
         listen:false, //是否监听滚动高度，开启后将实时返回滚动高度
         distance:200 //判断到达底部的距离，isToBottom为true
     },function(ret){
        if(ret.isToBottom){
            if(scrollStatus){
                getNewsListData();
            }
        }
     });
     var siteUrl;
    $(document).ready(function(){
        siteUrl = "http://fangshi.apithink.com/index.php?s=";
        getNewsMenu();
        getSliderInfo();
        getNewsListData();
    })
    function getNewsMenu(){
        var myColumnItems = document.querySelectorAll(".my-column");
        if(myColumnItems){
            for(var m = 0;m < myColumnItems.length;m++){
                if(myColumnItems[m])myColumnItems[m].parentNode.removeChild(myColumnItems[m]);
            }
        }
    	var myColumn = $api.getStorage("myColumnArray");
    	if(myColumn){
            if(myColumn != 0){
                var myColumnHtml = '';
                for(var i=0;i<myColumn.length;i++){
                    myColumnHtml += '<li class="aui-list-item my-column" tapmode onclick="openNewsList(\''+myColumn[i].split("-")[1]+'\',\''+myColumn[i].split("-")[2]+'\')"><div class="aui-list-item-media aui-list-item-middle"> <i class="aui-iconfont aui-icon-right aui-text-info"></i> </div><div class="aui-list-item-inner">'+myColumn[i].split("-")[2]+'</div></li>';
                }
                document.getElementById("news-menu-list").insertAdjacentHTML('beforeend', myColumnHtml);
            }
    	}else{
            $.ajax({
               type: "POST",
               url: siteUrl+'/App/News/getNewsClassify',
               success: function(ret){
                   if(ret.code == '1'){
	    	        	var tpl = document.getElementById("news-menu-tpl").innerHTML;
	                    var tempFn = doT.template(tpl);
	                    // document.getElementById("new-menu-list").insertAdjacentHTML('beforeend', tempFn(ret.data));
	                    document.getElementById("news-menu-list").insertAdjacentHTML('beforeend', tempFn(ret.data));
	    	        }
               },
               error:function(err){
                   a.content = err.msg;
                   layer.open(a);
               }
            });
        }
    }
    function openNewsList(classify_id,classify_name){
        closeSlide();
        classify_name = escape(classify_name);
        window.location.href = "main_refresh.html?classify_id="+classify_id+"&classify_name="+classify_name;
    }

    var menuContent = document.querySelector('.slide-menu .menu-content');
    menuContent.style.height = window.screen.height+"px";
    // 打开侧滑栏
    function slideMenu () {
    	var slide = document.querySelector('.slide-menu');
    	var slideshow = document.querySelector('.slide-menu.active');
    	slide.classList.add('show');
    	var body = document.querySelector('body');
    	slide.addEventListener('touchmove', function(event){
    		event.preventDefault();
    	},false)
    }
    //关闭侧滑栏
   function closeSlide() {
   		var slide = document.querySelector('.slide-menu');
    	var slideshow = document.querySelector('.slide-menu.active');
    	slide.classList.remove('show');
   }
    //搜索
   	function openNewsSearch(){
   		window.location.href='news/news_search.html';
    }
    //编辑
    function openNewsColumn(){
        window.location.href='news/news_column.html';
    }
    var slide = new auiSlide({
		container:document.getElementById("aui-slide"),
		// "width":300,
		"height":200,
		"speed":300,
		"pageShow":true,
		"pageStyle":'dot',
		"loop":true,
		'dotPosition':'right'
	})

    function openNewsDetail(news_id,type_id){
        switch (type_id) {
        	case "1":
                var url = "news/news_detail.html?news_id="+news_id;
        		break;
        	case "2":
                var url = "news/news_album_detail.html?news_id="+news_id;
                break;
        	case "3":
                var url = "news/news_video_detail.html?news_id="+news_id;
        		break;
        	case "4":
                var url = "news/news_detail.html?news_id="+news_id;
        		break;
        	default:
                var url = "news/news_detail.html?news_id="+news_id;
        		break;
        }
        window.location.href = url;
	}
	function changeNewMenu(){
    	var newsMenu = $api.byId('news-menu');
    	var menustatus = document.querySelector('.aui-list-item.hidden');
    	var activeicon = document.getElementById('downicon');
    	if (menustatus) {
    		newsMenu.classList.remove('hidden');
    		activeicon.classList.remove('aui-icon-right');
    		activeicon.classList.add('aui-icon-down');

    	}else {
    		newsMenu.classList.add('hidden');
    		activeicon.classList.remove('aui-icon-down');
    		activeicon.classList.add('aui-icon-right');
    	}
    }
    function openMy(){
        var token = $api.getStorage("token");
        if(!token){
            $api.setStorage("loginFrom","main.html");
            window.location.href='login.html';
            return;
        }
        window.location.href='my/my.html';
    }
    function openMall(){
        window.location.href='mall/mall.html';
    }
    function openCommunity(){
        window.location.href='community/community_frm_chosen.html';
    }
    function openActivity(){
        window.location.href='activity/activity_win.html';
    }
    function openHouse(){
        window.location.href='house/house_index.html';
    }
    //获取新闻分类
    function getNewsClassifyData(){
        $.ajax({
           type: "POST",
           url: siteUrl+'/App/News/getNewsClassify',
           data: "classify_id="+classify_id,
           success: function(ret){
               if(ret.code == '1'){
                   document.querySelector(".news-classify").style.display = "block";
                   var tpl = document.getElementById("news-classify-tpl").innerHTML;
                   var tempFn = doT.template(tpl);
                   document.getElementById("news-classify-list").insertAdjacentHTML('beforeend', tempFn(ret.data));
                   api.parseTapmode();
               }else{
                   document.querySelector(".news-classify").style.display = "block";
               }
           }
        });
    }
    //获取轮播信息
    function getSliderInfo(){
        $.ajax({
           type: "POST",
           url: siteUrl+'/App/News/getNewsListByFocus',
           data: "parent_classify_id="+classify_id,
           success: function(ret){
               if(ret.code == 1){
                   document.getElementById("aui-slide").classList.remove("hide");
                   var tpl = document.getElementById("slider-tpl").innerHTML;
                   var tempFn = doT.template(tpl);
                   document.querySelector(".aui-slide-wrap").innerHTML = tempFn(ret.data);
                   var slide = new auiSlide({
                       container:document.getElementById("aui-slide"),
                       // "width":300,
                       "height":200,
                       "speed":300,
                       "pageShow":true,
                       "pageStyle":'dot',
                       "loop":true,
                       'dotPosition':'right'
                   })
                   Echo.init({offset: 0,throttle: 0});
               }else{
                   document.getElementById("aui-slide").classList.add("hide");
               }
           }
        });
    }
    // 获取新闻列表
    function getNewsListData(refreshTime){
        scrollStatus = false;
        var token = $api.getStorage("token");
        pageNum++;
        $.ajax({
           type: "POST",
           url: siteUrl+'/App/News/getNewsList',
           data: "parent_classify_id="+classify_id+"&token="+token+"&pageNum="+pageNum,
           success: function(ret){
               if(ret.code == '1'){
                   if(pageNum == 1){
                       req_time = ret.req_time;
                       document.getElementById("news-list").innerHTML = '';
                   }
                   if(document.querySelector("#news-list.no-data"))document.querySelector("#news-list.no-data").classList.remove("no-data");
                   var tpl = document.getElementById("news-list-tpl").innerHTML;
                   var tempFn = doT.template(tpl);
                   document.getElementById("news-list").insertAdjacentHTML('beforeend', tempFn(ret.data));
                   Echo.init({
                       offset: 0,
                       throttle: 0
                   });
                   scrollStatus = true;
               }else {
                   if(pageNum == 1){
                       document.getElementById("news-list").innerHTML = '<div class="no-data"><img src="../image/no_data.png" /></div>';
                       document.getElementById("news-list").classList.add("no-data");
                   }
               }
           },
           error: function(err){
               console.log(err);
           }
        });
    }

</script>
</html>
